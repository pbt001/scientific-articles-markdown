<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Robert Winkler" />
  <meta name="keywords" content="markdown, latex, publishing, typesetting" />
  <title>Format follows function: Agile editing of scientific manuscripts with markdown</title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<div id="header">
<h1 class="title">Format follows function: Agile editing of scientific manuscripts with markdown</h1>
<h2 class="author">Robert Winkler</h2>
</div>
<p><strong>Correspondence</strong>: robert.winkler@cinvestav.mx, CINVESTAV Unidad Irapuato, Department of Biochemistry and Biotechnology, Laboratory of Biochemical and Instrumental Analysis (labABI, <a href="http://www.ira.cinvestav.mx/lababi.aspx" class="uri">http://www.ira.cinvestav.mx/lababi.aspx</a>), Km. 9.6 Libramiento Norte Carr. Irapuato-León 36821 Irapuato, Gto. Mexico, Tel.: +52 (462) 623 96 35, Fax +52 (462) 624 58 46</p>
<p><strong>Keywords</strong>: markdown, latex, publishing, typesetting</p>
<h1 id="introduction">Introduction</h1>
<p>Even if a submitted manuscript might be accepted by a journal ‘as is’, it still needs to be adjusted to the particular publication style in the production stage. Generally speaking, a scientific manuscript is composed from contents and formatting. Whilst the content, i.e. text, figures, tables, citations etc., may remain the same between different publishing forms and journal styles, the formatting can be rather different.<br> Current publishing formats PDF HTML EPUB.<br> Typesetting software, word processors such as Microsoft Word, LibreOffice, WPS Office, What You See Is What You Get (WYSIWYG), LaTeX What You See Is What You Want (WYSIWYW), hybrids such as LyX What You See Is What You Mean (WYSIWYM). Because of the sometimes complicated syntax specifications, simple conversions between file formats can be difficult or impossible.<br> In academic publishing, the following types of works require the creation of different output formats from the same source text:</p>
<ul>
<li>For the publishing of a book, with a print version in PDF and an electronic version in EPUB.</li>
<li>For distributing of a seminar script, with an online version in HTML and a print version in PDF.</li>
<li>For submitting a journal manuscript for peer-review in DOCX, as well as a pre-print version with another journal style in PDF.</li>
</ul>
<h2 id="comparison-of-different-markup-languages">Comparison of different markup languages</h2>
<p><strong>Table 1.</strong> Formatting elements and their implementation in different document types.</p>
<table>
<colgroup>
<col width="26%" />
<col width="16%" />
<col width="29%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Element</th>
<th align="left">Markdown</th>
<th>LaTeX</th>
<th>HTML</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>structure</strong></td>
<td align="left"></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">section</td>
<td align="left"><code># Intro</code></td>
<td><code>\section{Intro}</code></td>
<td><code>&lt;h1&gt;&lt;Intro&gt;&lt;/h1&gt;</code></td>
</tr>
<tr class="odd">
<td align="left">subsection</td>
<td align="left"><code>## History</code></td>
<td><code>\subsection{History}</code></td>
<td><code>&lt;h2&gt;&lt;History&gt;&lt;/h2&gt;</code></td>
</tr>
<tr class="even">
<td align="left"><strong>text formatting</strong></td>
<td align="left"></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">bold</td>
<td align="left"><code>**text**</code></td>
<td><code>\textbf{text}</code></td>
<td><code>text</code></td>
</tr>
<tr class="even">
<td align="left"><strong>cross references</strong></td>
<td align="left"></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">to section</td>
<td align="left"></td>
<td></td>
<td><code>text</code></td>
</tr>
<tr class="even">
<td align="left">http link</td>
<td align="left"></td>
<td></td>
<td><code>text</code></td>
</tr>
</tbody>
</table>
<p>Documents with the commonly used Office Open XML (DOCX Microsoft Word files) and OpenDocument (ODT LibreOffice) file formats can be opened in a standard text editor after unzipping. However, content and formatting information is distributed into various folders and files.<br />
Overall, markdown displays the simplest structure, which facilitates the editing of documents.</p>
<h1 id="concepts-of-markdown-and-pandoc">Concepts of markdown and Pandoc</h1>
<p><img src="fig-pandoc-workflow.png" alt="Workfow for the generation of multiple document formats with Pandoc" /><br> <strong>Figure xx.</strong> Workfow for the generation of multiple document formats with Pandoc.</p>
<h1 id="markdown-editors-and-online-editing">Markdown editors and online editing</h1>
<h2 id="editing-programs">Editing programs</h2>
<p>Because of the simple syntax, basically any text editor is suitable for editing markdown files. For several popular text editors, such as vim (<a href="http://www.vim.org/" class="uri">http://www.vim.org/</a>), GNU Emacs (<a href="https://www.gnu.org/software/emacs/" class="uri">https://www.gnu.org/software/emacs/</a>), atom (<a href="https://atom.io/" class="uri">https://atom.io/</a>) or geany (<a href="http://www.geany.org/" class="uri">http://www.geany.org/</a>), plugins provide additional functionality for markdown editing, such as syntax highlighting, live preview or structure browsing.<br />
On the other side, in the last years plenty of special mardown editors have been published. Many of those are cross-platform compatible, e.g. Abricotine (<a href="http://abricotine.brrd.fr/" class="uri">http://abricotine.brrd.fr/</a>), Ghostview (<a href="https://github.com/wereturtle/ghostwriter" class="uri">https://github.com/wereturtle/ghostwriter</a>) and CuteMarkEd (<a href="https://cloose.github.io/CuteMarkEd/" class="uri">https://cloose.github.io/CuteMarkEd/</a>).<br />
xx Writing on the go mobile devices, Even for tablets, Android and iOS devices, numerous free and low-cost applications exist. Parts of this text were written in xx JotterPad dictation and swipe softwarexx Various of those applications support the cloud storage of documents.</p>
<p><strong>Figure xx.</strong> Coding, preview and table of contents view using the CuteMarkEd editor.</p>
<h2 id="online-editing-and-collaborative-writing">Online editing and collaborative writing</h2>
<p>xx Google Docs test editing.</p>
<p>In recent years, several platforms were developed for collaborative writing. Google Docs. OwnCloud with Markdown Editor plugin (see section xx).</p>
<p><strong>Figure 2.</strong> Direct online editing of this manuscript with live preview using the ownCloud Markdown Editor plugin by Robin Appelman.</p>
<h2 id="document-versioning-and-change-control">Document versioning and change control</h2>
<p>Integrated in editing software or cloud server, low overhead of the files diff, git.</p>
<h1 id="pandoc-markdown-for-scientific-texts">Pandoc markdown for scientific texts</h1>
<h2 id="tables">Tables</h2>
<p>Pipe tables are less strict in their syntax</p>
<pre><code>| Left | Center | Right | Default |
|:-----|:------:|------:|---------|
| LLL  | CCC    | RRR   | DDD     |</code></pre>
<p>gives</p>
<table style="width:100%;">
<colgroup>
<col width="19%" />
<col width="26%" />
<col width="23%" />
<col width="30%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Left</th>
<th align="center">Center</th>
<th align="right">Right</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">LLL</td>
<td align="center">CCC</td>
<td align="right">RRR</td>
<td>DDD</td>
</tr>
</tbody>
</table>
<h2 id="figures">Figures</h2>
<h2 id="formula">Formula</h2>
<p>Formula can be inserted in LaTeX mode using delimiters (<code>$</code> for Pandoc, <code>$$</code> adds compatibility for online preview rendering with CuteMarkEd/MathJax). E.g. the formula for calculating the standard deviation <span class="math inline"><em>s</em></span> of a random sampling would be written as:</p>
<pre><code>$s=\sqrt{\frac{1}{N-1}\sum_{i=1}^N(x_i-\overline{x})^{2}}$</code></pre>
<p>and gives:</p>
<p><span class="math inline">$s=\sqrt{\frac{1}{N-1}\sum_{i=1}^N(x_i-\overline{x})^{2}}$</span></p>
<p>with <span class="math inline"><em>x</em><sub><em>i</em></sub></span> the individual observations, <span class="math inline">$\overline{x}$</span> the sample mean and <span class="math inline"><em>N</em></span> the total number of samples.</p>
<h2 id="code-listings">Code listings</h2>
<h1 id="citations-and-biography">Citations and biography</h1>
<h2 id="reference-databases">Reference databases</h2>
<p>bibtex databases, which are supported by almost any reference management program.</p>
<h2 id="database-of-cited-references">Database of cited references</h2>
<p>A bibtex data base for the cited references only using BibTool:</p>
<ol style="list-style-type: decimal">
<li>Extract refrence keys. This can be done by a simple Perl (<a href="https://www.perl.org/" class="uri">https://www.perl.org/</a>) command: <sub>~</sub> perl -ne ‘print “$1,” if /(?&lt;=@)(.+?)(?=[],])/’ agile-editing-pandoc.md <sub>~</sub> The command prints out the keys of the file <code>agile-editing-pandoc.md</code>, separated by comas. The domains of email adresses also will be returned, but this does not affect the creation of the final database.</li>
<li>Write an bibtex <code>.aux</code> file (e.g. <code>bibextract.aux</code>) containing the name of the database (here: <code>zotero.bib</code>) and the extracted keys, separated by comas (from the previous step): <sub><sub><sub>    </sub></sub></sub></li>
<li>Process the complete database to extract the cited references into a now database (called <code>bibshort.bib</code>): <sub>~</sub> bibtool -x bibextract.aux -o bibshort.bib <sub>~</sub></li>
</ol>
<h2 id="styles">Styles</h2>
<p>Whereas natbib bibtex is supported by Pandoc, it is incompatible with DOCX xx. The Citation Style Language (CSL) <a href="http://citationstyles.org/" class="uri">http://citationstyles.org/</a> is used for the citations and bibliographies. This file format is supported e.g. by the reference management programs Mendeley <a href="https://www.mendeley.com/" class="uri">https://www.mendeley.com/</a>, Papers <a href="http://papersapp.com/" class="uri">http://papersapp.com/</a> and Zotero <a href="https://www.zotero.org/" class="uri">https://www.zotero.org/</a>.<br />
CSL styles for particular journals can be found from the Zotero style repository <a href="https://www.zotero.org/styles" class="uri">https://www.zotero.org/styles</a>.<br />
The bibliography style, which Pandoc should use for the target document can be chosen or in the YAML block of the markdown document or can be passed as an command line option. The later is more recommendable, because different bibliography style may be used for different documents.</p>
<h2 id="creation-of-natbib-citations-in-latex">Creation of natbib citations in LaTeX</h2>
<p>For citations in scientific manuscripts written in LaTex, the natbib package is widely used. To create TEX output file with natbib citations, Pandoc simply has to be run with the <code>--natbib</code> option.</p>
<h1 id="document-code-and-software-availability">Document code and software availability</h1>
<p>The software used was cited according to <span class="citation">(Smith, Katz, &amp; Niemeyer, 2016; Winkler, 2010, p23)</span>. Since unique identifiers are missing for most software projects, we only refer to the project homepages or software repositories:</p>
<table>
<colgroup>
<col width="10%" />
<col width="24%" />
<col width="20%" />
<col width="5%" />
<col width="8%" />
<col width="30%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Software</th>
<th align="left">Use</th>
<th align="left">Authors</th>
<th align="left">Version</th>
<th align="left">Release date</th>
<th align="left">Homepage/ repository</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Pandoc</td>
<td align="left">universal markup converter</td>
<td align="left">John MacFarlane</td>
<td align="left">1.16.0.2</td>
<td align="left">2016/01/13</td>
<td align="left"><a href="http://www.pandoc.org" class="uri">http://www.pandoc.org</a></td>
</tr>
<tr class="even">
<td align="left">pandoc-citeproc</td>
<td align="left">library for CSL citations with Pandoc</td>
<td align="left">John MacFarlane, Andrea Rossato</td>
<td align="left">0.9.1</td>
<td align="left">2016/03/19</td>
<td align="left"><a href="https://github.com/jgm/pandoc-citeproc" class="uri">https://github.com/jgm/pandoc-citeproc</a></td>
</tr>
<tr class="odd">
<td align="left">ownCloud</td>
<td align="left">personal cloud software</td>
<td align="left">ownCloud GmbH, Community</td>
<td align="left">9.1.1</td>
<td align="left">2016/09/20</td>
<td align="left"><a href="https://owncloud.org/" class="uri">https://owncloud.org/</a></td>
</tr>
<tr class="even">
<td align="left">Markdown Editor</td>
<td align="left">plugin for ownCloud</td>
<td align="left">Robin Appelman</td>
<td align="left">0.1</td>
<td align="left">2016/03/08</td>
<td align="left"><a href="https://github.com/icewind1991/files_markdown" class="uri">https://github.com/icewind1991/files_markdown</a></td>
</tr>
<tr class="odd">
<td align="left">BibTool</td>
<td align="left">Bibtex database tool</td>
<td align="left">Gerd Neugebauer</td>
<td align="left">2.63</td>
<td align="left">2016/01/16</td>
<td align="left"><a href="https://github.com/ge-ne/bibtool" class="uri">https://github.com/ge-ne/bibtool</a></td>
</tr>
</tbody>
</table>
<p>xx CuteMarkEd xx xx JotterPad Prof xx Pandoc is available for Windows, Mac OS X, Linux, BSD and as source code.</p>
<p>The source code of this manuscript, as well as templates and the Pandoc script have been deposited to xx.</p>
<h1 id="definition-of-output-formatting">Definition of output formatting</h1>
<p>command line parameters and templates xx</p>
<h1 id="example-manuscript-with-output-of-docx-format-and-texpdf-for-peerj-pre-print-submission">Example: Manuscript with output of DOCX format and TEX/PDF for PeerJ pre-print submission</h1>
<h2 id="development-of-docx-template">Development of DOCX template</h2>
<p>A first DOCX document with bibliography in APA format is created with Pandoc DOCX output:</p>
<pre><code>pandoc -S -s --csl=apa.csl --filter pandoc-citeproc
-o pandoc-manuscript.docx agile-editing-pandoc.md</code></pre>
<p>The document settings and styles of the resulting file <code>pandoc-manuscript.docx</code> can be modified, and following it can be used as document template (<code>--reference-docx=pandoc-manuscript.docx</code>).</p>
<pre><code>pandoc -S -s --reference-docx=pandoc-manuscript.docx
--csl=apa.csl --filter pandoc-citeproc -o outfile.docx agile-editing-pandoc.md</code></pre>
<p>It is possible to directly re-use a previous output file as template (i.e. template and output file have the same file name):</p>
<pre><code>pandoc -S -s --columns=10 --reference-docx=outfile.docx --csl=apa.csl --filter pandoc-citeproc -o outfile.docx agile-editing-pandoc.md</code></pre>
<p>In this way, the template can be incrementally adjusted to the desired document formatting. The final document may be employed later as Pandoc template for other manuscripts with the same specifications. In this case, running Pandoc the first time with the template, the contents of the new manuscript would be filled into the provided DOCX template. A page with DOCX manuscript formatting of this article is shown in figure xx.</p>
<p><strong>Figure xx.</strong> DOCX output with a modified document template.</p>
<h2 id="development-of-a-texpdf-template">Development of a TEX/PDF template</h2>
<pre><code>pandoc -D latex &gt; template-peerj.latex</code></pre>
<h1 id="conclusions">Conclusions</h1>
<p>Writing scientific manuscripts in markdown format helps to focus on the content rather than on the format. Lightweight format facilitates file editing and handling. With the same source file, multiple output files for different uses or publisher’s specifications c can be generated with Pandoc. Therefore, a workflow based on markdown format is certainly an attractive option for scientific writers. Therefore, scientific publishers should consider to support the submission of documents in markdown format.</p>
<h1 id="acknowledgments">Acknowledgments</h1>
<p>We cordially thank Dr. Gerd Neugebauer for his help in creating a subset of a bibtex data base using BibTool. The work was funded by the Consejo Nacional de Ciencia y Tecnología (CONACyT) Mexico, with the grant FRONTERAS 2015-2/814 and by institutional funding of the Centro de Investigación y de Estudios Avanzados del Instituto Politécnico Nacional (CINVESTAV).</p>
<h1 id="bibliography" class="unnumbered">Bibliography</h1>
<div id="refs" class="references">
<div id="ref-smith_software_2016">
<p>Smith, A. M., Katz, D. S., &amp; Niemeyer, K. E. (2016). Software citation principles. <em>PeerJ Computer Science</em>, <em>2</em>, e86. <a href="http://doi.org/10.7717/peerj-cs.86" class="uri">http://doi.org/10.7717/peerj-cs.86</a></p>
</div>
<div id="ref-winkler_esiprot:_2010">
<p>Winkler, R. (2010). ESIprot: A universal tool for charge state determination and molecular weight calculation of proteins from electrospray ionization mass spectrometry data. <em>Rapid Communications in Mass Spectrometry</em>, <em>24</em>(3), 285–294.</p>
</div>
</div>
</body>
</html>
